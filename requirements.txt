# ============================================================
# GreenMLOps — requirements.txt
# Updated: February 2026
# Python: 3.9+
#
# INSTALL ORDER (important):
#   1. pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
#      (use cu118 for CUDA 11.8, cu121 for CUDA 12.1, cpu for CPU-only)
#   2. pip install -r requirements.txt
# ============================================================


# ── CORE MLOPS ───────────────────────────────────────────────
mlflow==3.8.1
apache-airflow==3.1.6
apache-airflow-core==3.1.6
apache-airflow-providers-common-compat==1.12.0
apache-airflow-providers-common-io==1.7.1
apache-airflow-providers-common-sql==1.30.3
apache-airflow-providers-smtp==2.4.2
apache-airflow-providers-standard==1.10.3
apache-airflow-task-sdk==1.1.6


# ── CARBON TRACKING ──────────────────────────────────────────
codecarbon==3.2.1
# codecarbon requires nvidia-ml-py for GPU tracking
nvidia-ml-py==13.590.48


# ── DRIFT DETECTION ──────────────────────────────────────────
# IMPORTANT: Pin to 0.4.16 — project uses this version, newer versions break existing pipelines
# Used for: Tabular drift (Credit Card Fraud, ETT) via PSI
evidently==0.4.16
# NOTE: evidently==0.7.20 is currently installed — DOWNGRADE to 0.4.16
# Run: pip install evidently==0.4.16


# ── DEEP LEARNING — NEW FOR DATASET REDESIGN ─────────────────
# torch and torchvision must be installed separately via PyTorch install command above
# (version depends on your CUDA version — do not pin here)
# Used for: ResNet-18 (CIFAR-100), LSTM (ETT)
torch
torchvision

# HuggingFace stack — DistilBERT fine-tuning on AG News
transformers==4.57.6
datasets==4.5.0
accelerate==1.12.0
# tokenizers is installed automatically by transformers but pin for reproducibility
tokenizers>=0.21.0


# ── TABULAR ML ───────────────────────────────────────────────
xgboost==3.1.3
scikit-learn==1.8.0
# SMOTE for Credit Card Fraud class imbalance
imbalanced-learn==0.14.1


# ── DATA & SCIENTIFIC COMPUTING ──────────────────────────────
numpy==2.4.1
pandas==2.3.3
scipy==1.17.0
statsmodels==0.14.6
pyarrow==22.0.0


# ── EMBEDDING DRIFT DETECTION (custom PCA-50 + MMD + KS) ────
# All provided by scipy and scikit-learn above — no extra packages needed
# scipy.stats → KS test
# sklearn.decomposition.PCA → PCA-50
# sklearn.metrics.pairwise → RBF kernel for MMD


# ── VISUALIZATION ─────────────────────────────────────────────
matplotlib==3.10.8
seaborn==0.13.2
plotly==5.24.1


# ── DATA VERSION CONTROL ──────────────────────────────────────
dvc


# ── NOTEBOOKS & DEVELOPMENT ───────────────────────────────────
jupyter==1.1.1
jupyterlab==4.5.3
ipykernel==7.1.0
ipywidgets==8.1.8
nbformat==5.10.4
tqdm==4.67.1


# ── UTILITIES ────────────────────────────────────────────────
python-dotenv==1.2.1
pyyaml==6.0.3
requests==2.32.5
pandas==2.3.3
pillow==12.1.0


# ── TESTING & CODE QUALITY ───────────────────────────────────
pytest==9.0.2
black==26.1.0
flake8==7.3.0


# ── INFRASTRUCTURE ───────────────────────────────────────────
docker==7.1.0



# ============================================================
# REMOVED FROM ORIGINAL (no longer needed):
#
# All old dataset-specific packages that had no other purpose
# are removed. Everything else above is either:
#   (a) required by Airflow/MLflow/CodeCarbon internals, or
#   (b) directly used in the new pipeline
#
# CRITICAL CHANGES SUMMARY:
#   DOWNGRADED: evidently 0.7.20 → 0.4.16  (breaking change in newer versions)
#   ADDED:      torch, torchvision          (ResNet-18 + LSTM)
#   ADDED:      transformers 4.57.6         (DistilBERT)
#   ADDED:      datasets 4.5.0              (HuggingFace AG News)
#   ADDED:      accelerate 1.12.0           (HuggingFace Trainer)
#   ADDED:      imbalanced-learn 0.14.1     (SMOTE for fraud dataset)
# ============================================================
